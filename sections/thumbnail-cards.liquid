{%- capture flickity_options -%}
{
  "prevNextButtons": false,
  "pageDots": true,
  "draggable": true,
  "contain": true,
  "freeScroll": true,
  "cellAlign": "left",
  "groupCells": true,
  "arrowShape": {"x0": 20, "x1": 60, "y1": 40, "x2": 60, "y2": 35, "x3": 25}
}
{%- endcapture -%}

<Section>
  <div class="cards-heading">
    <h1>{{ section.settings.title }}</h1>
    <a href="https://www.memeraki.com">
      <h4 style='color: #f4cb28'>View All</h4>
    </a>
  </div>

  <div class="thumbnail-container js-flickity" data-flickity='{{ flickity_options }}'>
    {% for block in section.blocks %}
      <div class="carousel-cell thumbnail-card">
        <a href="{{ block.settings.card_collection.url }}">
          <div class="thumbnail">
            {{ block.settings.card_collection.image.src | image_url: height: 600 | image_tag: class: 'lazyload-fade lazyautosizes lazyloaded' }}
        </div>
        <div class="thumbnail-name">
            <h3>{{ block.settings.card_collection.title }}</h3>
        </div>  
        </a>
      </div>
    {% endfor %}

      <div class="carousel-cell thumbnail-card">
        <a href="{{ section.settings.view_all_url }}">
          <div id="last-card" class="thumbnail">
            <h3 style="color: white;">{{ section.settings.last_card }}</h3>
          </div>  
        </a>
      </div>  
      
  </div>

  
</Section>

<style>
  .flickity-page-dots {
    bottom: -22px;
  }

  /* dots are lines */
  .flickity-page-dots .dot {
    height: 4px;
    width: 20px;
    margin: 0;
    border-radius: 0;
  }

  .shopify-section-thumbnail-cards{
    margin: 10px 20px 50px 20px;
    padding-left: 30px;
    padding-right: 30px;
  }

  .thumbnail-container{
    margin-top: 20px;
  }

  #last-card{
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .cards-heading > h1{
      display: inline;
      width: 100%;
  }
  .cards-heading > a {
      float: right;
      display: inline;
  }
  

  .thumbnail-card{
      margin-right: 45px;
      margin-top: 10px;
  }

  .thumbnail-card > a{
      text-decoration: none;
      color: black;
      
  }

  .thumbnail{
      background-color: #411e2f;
      height: 200px;
      width: 200px;
      max-height: 200px;
      max-width: 200px;
      border-radius: 0px 35px 0px 0px;
  }

  .thumbnail-name{
    max-width: 200px;
  }

  .thumbnail > img{
      width: 100%;
      height: 100%;
      border-radius: 0px 30px 0px 0px;
  }

  .thumbnail > div > h3{
    color: white;
    margin: 20% 20%;
  }

  @media screen and (max-width: 980px) {
    .thumbnail{
      height: 150px;
      width: 150px;
    }
    .thumbnail-card{
      margin-right: 30px;
    }
    .shopify-section-thumbnail-cards{
      padding-left: 5px;
      padding-right: 5px;
    }
  }

  

</style>

{% schema %}
  {
    "name": "Thumbnail Cards",
    "class": "shopify-section-thumbnail-cards",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading"
      },
      {
        "type": "text",
        "id": "last_card",
        "label": "Last Card Text"
      },
      {
        "type": "url",
        "id": "view_all_url",
        "label": "View All URL"
      }
    ],
    "max_blocks": 10,
    "blocks": [
       {
         "name": "Card",
         "type": "card",
         "settings": [
          {
            "type": "collection",
            "id": "card_collection",
            "label": "Collection"
          }
         ]
       }
    ],
    "presets":[
      {
        "name": "Thumbnail Cards",
        "settings": {
          "title": "Explore By"
        }
      }
    ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %} 